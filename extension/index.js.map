{"mappings":"C,A,kC;A,uC;A,E;A,2D;A,E;A,4D;A,wD;A,S,C,C,C,C,C,C,C,C,C,E,2B,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,0D;A,+D;A,8B;A,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,E,gE;A,6D;A,+D;A,gC;A,G,E,O,E,E,C,E,+C;A,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,I,C,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,qD;A,yE;A,I,E,E,E,Y;A,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,C,O,W,O,C,G,G,C,I,C,E,C,C,C,C,E,C,Q,C,S,C,C,C,C,C,E,I,E,E,kD,E,iB,C,GCAA,IAAA,EAAA,EAAA,6B,E,E,c,C,GACA,EAAA,EAAA,gB,E,E,c,C,EAEe,CAAA,EAAA,OAAA,CAAA,AAAC,IAGd,AAFA,iGAAiG;AACjG,4DAA4D;AAC5D,CAAA,EAAA,EAAA,OAAe,AAAf,EAAiB,GAAA,CAAI,GAErB,AAAA,CAAA,EAAA,EAAA,OAAS,AAAT,EAAW,EACb,C,E,C,4B,Q,e,Q,iD,O,E,C,M,C,S,C,C,C,C,C,ECPA,IAAI,CACJ,CAAA,EAAO,OAAA,CAAU,CAChB,IAAA,IACQ,EAER,IAAI,CAAG,EACN,EAAU,CACX,CACD,C,E,C,E,C,Q,C,S,C,C,C,C,C,E,A,E,kD,iB,C,GCVe,EAAA,OAAA,CAAA,AAAC,QAuBV,EAtBJ,IAAM,EAAmB,EAAO,SAAA,CAAU,mBAAoB,CAC5D,aAAc,CAAA,EACd,WAAY,CAAA,CACd,GACM,EAAoB,EAAO,SAAA,CAAU,oBAAqB,CAC9D,aAAc,CAAA,EACd,WAAY,CAAA,CACd,GACM,EAAa,EAAO,SAAA,CAAU,aAAc,CAChD,aAAc,CACZ,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,MAAO,EACT,EACA,WAAY,CAAA,CACd,GACM,EAAW,EAAO,SAAA,CAAU,kBAAmB,CACnD,aAAc,EAAE,CAChB,WAAY,CAAA,CACd,GAIM,EAAQ,KACZ,qBAAqB;AACjB,EAAkB,KAAA,EAAS,EAAiB,KAAA,GAIhD,EAAkB,KAAA,CAAQ,CAAA,EAE1B,gCAAgC;AAChC,EAAe,WAAW,KACxB,EAAkB,KAAA,CAAQ,CAAA,CAC5B,EAAG,MACL,EAEA,EAAO,SAAA,CAAU,mBAAoB,AAAC,IAChC,EAAiB,KAAA,GAAU,IAI3B,EACF,EAAO,GAAA,CAAI,IAAA,CAAK,6BAEhB,EAAO,GAAA,CAAI,IAAA,CAAK,+BAGlB,EAAiB,KAAA,CAAQ,EAC3B,GAEA,EAAO,SAAA,CAAU,aAAc,AAAC,IAC9B,IAAM,EAAU,EAAS,KAAA,CAAM,MAAA,CAC7B,AAAC,GAAU,EAAM,IAAA,GAAS,EAAM,KAAA,CAAM,WAAA,GACnC,UAAA,CAAW,IAAK,MAGjB,EAAS,EACT,CAAA,EAAQ,MAAA,GACV,EAAO,GAAA,CAAI,KAAA,CAAM,CAAC,gBAAgB,EAAE,EAAM,KAAA,CAAM,CAAC,CAAC,EAClD,EAAS,CAAO,CAAC,EAAE,CAAC,GAApB,EAGF,EAAW,KAAA,CAAQ,CACjB,GAAG,CAAK,CACR,OAAA,CACF,EAGI,EAAkB,KAAA,GACpB,aAAa,GACb,EAAkB,KAAA,CAAQ,CAAA,GAG5B,mBAAmB;AACnB,GACF,EACF,C,E,C,iD,O,E,C,M,C,S,C,C,C,C,C,EC/EA,EAAQ,cAAA,CAAiB,SAAU,CAAC,EAClC,OAAO,GAAK,EAAE,UAAA,CAAa,EAAI,CAAC,QAAS,CAAC,CAC5C,EAEA,EAAQ,iBAAA,CAAoB,SAAU,CAAC,EACrC,OAAO,cAAA,CAAe,EAAG,aAAc,CAAC,MAAO,CAAA,CAAI,EACrD,EAEA,EAAQ,SAAA,CAAY,SAAU,CAAM,CAAE,CAAI,EAcxC,OAbA,OAAO,IAAA,CAAK,GAAQ,OAAA,CAAQ,SAAU,CAAG,EAC3B,YAAR,GAAqB,AAAQ,eAAR,GAAwB,EAAK,cAAA,CAAe,IAIrE,OAAO,cAAA,CAAe,EAAM,EAAK,CAC/B,WAAY,CAAA,EACZ,IAAK,WACH,OAAO,CAAM,CAAC,EAAI,AACpB,CACF,EACF,GAEO,CACT,EAEA,EAAQ,MAAA,CAAS,SAAU,CAAI,CAAE,CAAQ,CAAE,CAAG,EAC5C,OAAO,cAAA,CAAe,EAAM,EAAU,CACpC,WAAY,CAAA,EACZ,IAAK,CACP,EACF,C,E,C,E,E,C,Q,C,Q,oB,iC","sources":["<anon>","src/extension/index.js","src/extension/util/nodecg-api-context.js","src/extension/nowplaying.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        this\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"2yoZy\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _nodecgApiContext = require(\"./util/nodecg-api-context\");\nvar _nodecgApiContextDefault = parcelHelpers.interopDefault(_nodecgApiContext);\nvar _nowplaying = require(\"./nowplaying\");\nvar _nowplayingDefault = parcelHelpers.interopDefault(_nowplaying);\nexports.default = (nodecg)=>{\n    // Store a reference to this nodecg API context in a place where other libs can easily access it.\n    // This must be done beforeu any other files are `require`d.\n    (0, _nodecgApiContextDefault.default).set(nodecg);\n    (0, _nowplayingDefault.default)(nodecg);\n};\n\n},{\"./util/nodecg-api-context\":\"fBgQh\",\"./nowplaying\":\"1VBCz\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"di8yw\"}],\"fBgQh\":[function(require,module,exports) {\n\"use strict\";\nlet context;\nmodule.exports = {\n    get () {\n        return context;\n    },\n    set (ctx) {\n        context = ctx;\n    }\n};\n\n},{}],\"1VBCz\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nexports.default = (nodecg)=>{\n    const nowPlayingPaused = nodecg.Replicant(\"nowPlayingPaused\", {\n        defaultValue: false,\n        persistent: false\n    });\n    const nowPlayingShowing = nodecg.Replicant(\"nowPlayingShowing\", {\n        defaultValue: false,\n        persistent: false\n    });\n    const nowPlaying = nodecg.Replicant(\"nowPlaying\", {\n        defaultValue: {\n            artUrl: \"\",\n            title: \"\",\n            artist: \"\",\n            album: \"\"\n        },\n        persistent: false\n    });\n    const albumart = nodecg.Replicant(\"assets:albumart\", {\n        defaultValue: [],\n        persistent: false\n    });\n    let pulseTimeout;\n    const pulse = ()=>{\n        // Don't stack pulses\n        if (nowPlayingShowing.value || nowPlayingPaused.value) return;\n        nowPlayingShowing.value = true;\n        // Hard-coded 12 second duration\n        pulseTimeout = setTimeout(()=>{\n            nowPlayingShowing.value = false;\n        }, 12000);\n    };\n    nodecg.listenFor(\"toggleNowPlaying\", (isActive)=>{\n        if (nowPlayingPaused.value === isActive) return;\n        if (isActive) nodecg.log.info(\"NowPlaying is now paused.\");\n        else nodecg.log.info(\"NowPlaying has now resumed.\");\n        nowPlayingPaused.value = isActive;\n    });\n    nodecg.listenFor(\"nowPlaying\", (track)=>{\n        const imgData = albumart.value.filter((value)=>value.name === track.album.toLowerCase().replaceAll(\" \", \"_\"));\n        let artUrl = \"\";\n        if (imgData.length) {\n            nodecg.log.debug(`Found image for ${track.album}.`);\n            artUrl = imgData[0].url;\n        }\n        nowPlaying.value = {\n            ...track,\n            artUrl\n        };\n        // If the graphic is already showing, end it prematurely and show the new song\n        if (nowPlayingShowing.value) {\n            clearTimeout(pulseTimeout);\n            nowPlayingShowing.value = false;\n        }\n        // Show the graphic\n        pulse();\n    });\n};\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"di8yw\"}],\"di8yw\":[function(require,module,exports) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, \"__esModule\", {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === \"default\" || key === \"__esModule\" || dest.hasOwnProperty(key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}]},[\"2yoZy\"], \"2yoZy\", \"parcelRequire5971\")\n\n//# sourceMappingURL=index.js.map\n","import nodecgApiContext from './util/nodecg-api-context';\nimport nowplaying from './nowplaying';\n\nexport default (nodecg) => {\n  // Store a reference to this nodecg API context in a place where other libs can easily access it.\n  // This must be done beforeu any other files are `require`d.\n  nodecgApiContext.set(nodecg);\n\n  nowplaying(nodecg);\n};\n","'use strict';\n\nlet context;\nmodule.exports = {\n\tget() {\n\t\treturn context;\n\t},\n\tset(ctx) {\n\t\tcontext = ctx;\n\t}\n};\n","export default (nodecg) => {\n  const nowPlayingPaused = nodecg.Replicant('nowPlayingPaused', {\n    defaultValue: false,\n    persistent: false,\n  });\n  const nowPlayingShowing = nodecg.Replicant('nowPlayingShowing', {\n    defaultValue: false,\n    persistent: false,\n  });\n  const nowPlaying = nodecg.Replicant('nowPlaying', {\n    defaultValue: {\n      artUrl: '',\n      title: '',\n      artist: '',\n      album: '',\n    },\n    persistent: false,\n  });\n  const albumart = nodecg.Replicant('assets:albumart', {\n    defaultValue: [],\n    persistent: false,\n  });\n\n  let pulseTimeout;\n\n  const pulse = () => {\n    // Don't stack pulses\n    if (nowPlayingShowing.value || nowPlayingPaused.value) {\n      return;\n    }\n\n    nowPlayingShowing.value = true;\n\n    // Hard-coded 12 second duration\n    pulseTimeout = setTimeout(() => {\n      nowPlayingShowing.value = false;\n    }, 12 * 1000);\n  };\n\n  nodecg.listenFor('toggleNowPlaying', (isActive) => {\n    if (nowPlayingPaused.value === isActive) {\n      return;\n    }\n\n    if (isActive) {\n      nodecg.log.info('NowPlaying is now paused.');\n    } else {\n      nodecg.log.info('NowPlaying has now resumed.');\n    }\n\n    nowPlayingPaused.value = isActive;\n  });\n\n  nodecg.listenFor('nowPlaying', (track) => {\n    const imgData = albumart.value.filter(\n      (value) => value.name === track.album.toLowerCase()\n        .replaceAll(' ', '_'),\n    );\n\n    let artUrl = '';\n    if (imgData.length) {\n      nodecg.log.debug(`Found image for ${track.album}.`);\n      artUrl = imgData[0].url;\n    }\n\n    nowPlaying.value = {\n      ...track,\n      artUrl,\n    };\n\n    // If the graphic is already showing, end it prematurely and show the new song\n    if (nowPlayingShowing.value) {\n      clearTimeout(pulseTimeout);\n      nowPlayingShowing.value = false;\n    }\n\n    // Show the graphic\n    pulse();\n  });\n};\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","parcelHelpers","defineInteropFlag","_nodecgApiContext","_nodecgApiContextDefault","interopDefault","_nowplaying","_nowplayingDefault","default","nodecg","set","context","ctx","pulseTimeout","nowPlayingPaused","Replicant","defaultValue","persistent","nowPlayingShowing","nowPlaying","artUrl","title","artist","album","albumart","pulse","value","setTimeout","listenFor","isActive","log","info","track","imgData","filter","toLowerCase","replaceAll","debug","url","clearTimeout","a","__esModule","exportAll","source","dest","keys","forEach","key","hasOwnProperty","enumerable","export","destName"],"version":3,"file":"index.js.map","sourceRoot":"../"}