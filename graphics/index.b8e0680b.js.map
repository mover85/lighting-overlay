{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-00197b4c6cd8c318.js","node_modules/@parcel/runtime-js/lib/runtime-dc7657ed97cddece.js","src/graphics/elements/nowplaying/nowplaying.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"g7o3i\\\":\\\"index.b8e0680b.js\\\",\\\"jUUB5\\\":\\\"default_album_cover.924bd082.jpg\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"jUUB5\")).toString();","import { PolymerElement, html } from '@polymer/polymer';\nimport gsap from 'gsap';\nimport '@polymer/iron-image';\nimport cover from 'url:./img/default_album_cover.jpg';\n\n(function () {\n\t'use strict';\n\n\tconst nowPlaying = nodecg.Replicant('nowPlaying');\n\tconst nowPlayingShowing = nodecg.Replicant('nowPlayingShowing');\n\n\t/**\n\t * @customElement\n\t * @polymer\n\t */\n\tclass Nowplaying extends PolymerElement {\n\t\tstatic get is() {\n\t\t\treturn 'element-nowplaying';\n\t\t}\n\n\t\tstatic get properties() {\n\t\t\treturn {\n\t\t\t\tdefaultArtUrl: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: cover,\n\t\t\t\t},\n\t\t\t\tartUrl: {\n\t\t\t\t\ttype: String\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tobserver: 'titleChanged'\n\t\t\t\t},\n\t\t\t\tartist: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tobserver: 'artistChanged'\n\t\t\t\t},\n\t\t\t\talbum: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tobserver: 'albumChanged'\n\t\t\t\t},\n\t\t\t\tduration: {\n\t\t\t\t\ttype: Number,\n\t\t\t\t\tvalue: 15\n\t\t\t\t},\n\t\t\t\tshowing: {\n\t\t\t\t\ttype: Boolean,\n\t\t\t\t\tvalue: false,\n\t\t\t\t\treadOnly: true\n\t\t\t\t},\n\t\t\t\ttl: {\n\t\t\t\t\ttype: Object,\n\t\t\t\t\tvalue: gsap.timeline(),\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tready() {\n\t\t\tsuper.ready();\n\n\t\t\tnowPlaying.on('change', (newVal) => {\n\t\t\t\tif (typeof newVal !== 'object') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.artUrl = newVal.artUrl;\n\t\t\t\tthis.title = newVal.title;\n\t\t\t\tthis.artist = newVal.artist;\n\t\t\t\tthis.album = newVal.album;\n\t\t\t});\n\n\t\t\tnowPlayingShowing.on('change', (newVal) => {\n\t\t\t\tif (newVal) {\n\t\t\t\t\tthis.show();\n\t\t\t\t} else {\n\t\t\t\t\tthis.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\ttitleChanged(newVal) {\n\t\t\tthis.$.title.innerHTML = `&#9834; ${newVal}`;\n\n\t\t\tconst title = this.$.title;\n\t\t\tconst titleWidth = title.scrollWidth;\n\t\t\tconst maxWidth = this._getElementContentWidth(this.$.details);\n\t\t\tif (titleWidth > maxWidth) {\n\t\t\t\tgsap.set(title, {scaleX: maxWidth / titleWidth});\n\t\t\t} else {\n\t\t\t\tgsap.set(title, {scaleX: 1});\n\t\t\t}\n\t\t}\n\n\t\tartistChanged() {\n\t\t\tconst artist = this.$.artist;\n\t\t\tconst artistWidth = artist.scrollWidth;\n\t\t\tconst maxWidth = this._getElementContentWidth(this.$.details);\n\t\t\tif (artistWidth > maxWidth) {\n\t\t\t\tgsap.set(artist, {scaleX: maxWidth / artistWidth});\n\t\t\t} else {\n\t\t\t\tgsap.set(artist, {scaleX: 1});\n\t\t\t}\n\t\t}\n\n\t\talbumChanged() {\n\t\t\tconst album = this.$.album;\n\t\t\tconst albumWidth = album.scrollWidth;\n\t\t\tconst maxWidth = this._getElementContentWidth(this.$.details);\n\t\t\tif (albumWidth > maxWidth) {\n\t\t\t\tgsap.set(album, {scaleX: maxWidth / albumWidth});\n\t\t\t} else {\n\t\t\t\tgsap.set(album, {scaleX: 1});\n\t\t\t}\n\t\t}\n\n\t\tshow() {\n\t\t\tif (this.showing) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._setShowing(true);\n\n\t\t\tconst self = this;\n\n\t\t\t// Prevent first \"call\" from getting ignored\n\t\t\tthis.tl.to({}, 0.01, {});\n\n\t\t\tthis.tl.to(this.$.line, {\n\t\t\t\tduration: 0.5,\n\t\t\t\theight: '100%',\n\t\t\t\tease: 'Power1.easeInOut'\n\t\t\t});\n\n\t\t\tthis.tl.add('stuffIn');\n\n\t\t\tthis.tl.to(this.$.art, {\n\t\t\t\tduration: 0.4,\n\t\t\t\tx: '0%',\n\t\t\t\tease: 'Power1.easeOut'\n\t\t\t}, 'stuffIn');\n\n\t\t\tthis.tl.to(this.$.details, {\n\t\t\t\tduration: 0.7,\n\t\t\t\tx: '0%',\n\t\t\t\tease: 'Power1.easeOut'\n\t\t\t}, 'stuffIn');\n\t\t}\n\n\t\thide() {\n\t\t\tif (!this.showing) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._setShowing(false);\n\n\t\t\tthis.tl.add('stuffOut');\n\n\t\t\tthis.tl.to(this.$.art, {\n\t\t\t\tduration: 0.4,\n\t\t\t\tx: '100%',\n\t\t\t\tease: 'Power1.easeIn'\n\t\t\t}, 'stuffOut+=0.3');\n\n\t\t\tthis.tl.to(this.$.details, {\n\t\t\t\tduration: 0.7,\n\t\t\t\tx: '-100%',\n\t\t\t\tease: 'Power1.easeIn'\n\t\t\t}, 'stuffOut');\n\n\t\t\tthis.tl.to(this.$.line, {\n\t\t\t\tduration: 0.5,\n\t\t\t\theight: '0%',\n\t\t\t\tease: 'Power1.easeInOut'\n\t\t\t});\n\t\t}\n\n\t\t_getElementContentWidth(element) {\n\t\t\tconst styles = window.getComputedStyle(element);\n\t\t\tconst padding = parseFloat(styles.paddingLeft) + parseFloat(styles.paddingRight);\n\t\t\treturn element.clientWidth - padding;\n\t\t}\n\n\t\tstatic get template() {\n\t\t\treturn html`\n\t\t\t\t<style>\n\t\t\t\t\t:host {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: 88px;\n\t\t\t\t\t\tleft: 88px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.fullHeight {\n\t\t\t\t\t\theight: 120px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.cull {\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t}\n\n\t\t\t\t\t.centerFlex {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.background {\n\t\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.75);\n\t\t\t\t\t}\n\n\t\t\t\t\t#art {\n\t\t\t\t\t\twidth: 120px;\n\t\t\t\t\t\tbackground-position: center;\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t\tbackground-color: #D3C9C9;\n\t\t\t\t\t\ttransform: translateX(100%);\n\t\t\t\t\t}\n\n\t\t\t\t\t#line {\n\t\t\t\t\t\twidth: 3px;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t\tbackground-color: #ac09ff;\n\t\t\t\t\t}\n\n\t\t\t\t\t#details {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tpadding: 1.2em 2em 1em 1em;\n\t\t\t\t\t\tcolor: #E4E4E4;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\tmax-width: 500px;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\ttransform: translateX(-100%);\n\t\t\t\t\t}\n\n\t\t\t\t\t#title {\n\t\t\t\t\t\tfont-size: 30px;\n\t\t\t\t\t\tline-height: 34px;\n\t\t\t\t\t\ttransform-origin: left;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tmargin: 0 0 0.25em 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t#artist {\n\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t\tline-height: 22px;\n\t\t\t\t\t\ttransform-origin: left;\n\t\t\t\t\t\tmargin: 0 0 0.25em 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t#album {\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\tline-height: 22px;\n\t\t\t\t\t\ttransform-origin: left;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\n        <div class=\"cull fullHeight\">\n\t\t\t\t\t<iron-image\n\t\t\t\t\t\tid=\"art\"\n\t\t\t\t\t\tclass=\"fullHeight\"\n\t\t\t\t\t\tsizing=\"contain\"\n\t\t\t\t\t\tsrc=\"[[artUrl]]\"\n            placeholder=\"[[defaultArtUrl]]\"\n\t\t\t\t\t\tpreload\n\t\t\t\t\t\tfade\n\t\t\t\t\t>\n\t\t\t\t\t</iron-image>\n        </div>\n        <div class=\"cull fullHeight centerFlex\">\n\t\t\t\t\t<div id=\"line\"></div>\n        </div>\n        <div class=\"cull\">\n\t\t\t\t\t<div id=\"details\" class=\"background fullHeight\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p id=\"title\">[[title]]</p>\n\t\t\t\t\t\t\t<p id=\"artist\">[[artist]]</p>\n\t\t\t\t\t\t\t<p id=\"album\">[[album]]</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n        </div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tcustomElements.define(Nowplaying.is, Nowplaying);\n})();\n"],"names":["parcelRequire","register","JSON","parse","$4f5dc1ea51e94251$exports","URL","resolve","import","meta","url","toString","nowPlaying","nodecg","Replicant","nowPlayingShowing","Nowplaying","$3QCHS","PolymerElement","defaultArtUrl","type","String","value","$parcel$interopDefault","artUrl","title","observer","artist","album","duration","Number","showing","Boolean","readOnly","tl","Object","$90hPx","default","timeline","ready","super","on","newVal","this","show","hide","titleChanged","$","innerHTML","titleWidth","scrollWidth","maxWidth","_getElementContentWidth","details","set","scaleX","artistChanged","artistWidth","albumChanged","albumWidth","_setShowing","to","line","height","ease","add","art","x","element","styles","window","getComputedStyle","padding","parseFloat","paddingLeft","paddingRight","clientWidth","html","customElements","define","is"],"version":3,"file":"index.b8e0680b.js.map"}